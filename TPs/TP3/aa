#include <stdio.h>
#include <stdlib.h>

typedef struct Celula{
    int elemento;
    struct Celula* prox;
}Celula;

typedef struct FilaCircular{
    Celula* primeiro;
    Celula* ultimo;
}FilaCircular;

void newFilaCircular(FilaCircular* fila){
    fila->primeiro = NULL;
    fila->ultimo = NULL;
}

int tamanho(FilaCircular* fila){
    int tam = 0;
    Celula* i = fila->primeiro;
    do{
        tam++;
        i = i->prox;
    }while(i != fila->primeiro);
    return tam;
}

void enfilerar(FilaCircular* fila, int x){
    /*if(tamanho(fila) >= 5){
        //desenfilerar(fila);
        printf("erro");
    }*/
    Celula* novo = (Celula*)malloc(sizeof(Celula));
    novo->elemento = x;
    
    if(fila->ultimo == NULL){
        fila->primeiro = novo;
        novo->prox = novo;
    }else{
        novo->prox = fila->primeiro;
        fila->ultimo->prox = novo;
    }
    fila->ultimo = novo;
}

/*int desenfilerar(Celula* fila){
    if(fila->primeiro == fila->ultimo){
        printf("Erro!\n");
        return -1;
    }
    int x = fila->prox->elemento;
    fila->prox = fila->prox->prox;
    fila->primeiro = (fila->primeiro+1) % fila->max;
    fila->n--;
    return x;
}*/

void mostrar(FilaCircular* fila){
    Celula* i = fila->primeiro;
    printf("[");
    do{
        printf("%d", i->elemento);
        if(i->prox != fila->primeiro){
            printf(", ");
        }
        i = i->prox;
    }while(i != fila->primeiro);
    
    printf("]\n");
}
    
int main(){
    FilaCircular* fila;
    
    enfilerar(fila, 1);
    enfilerar(fila, 2);
    enfilerar(fila, 3);
    enfilerar(fila, 4);
    enfilerar(fila, 5);
    mostrar(fila);
    return 0;
}
